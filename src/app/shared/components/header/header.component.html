<header class="app-header">
  <div class="header-container">
    <!-- Logo Section -->
    <div class="header-logo">
      <h1 class="logo-text" role="banner">
        <span class="logo-icon" aria-hidden="true">üé∏</span>
        <span>YouTube Looper</span>
      </h1>
    </div>

    <!-- URL Input Section -->
    <div class="header-input">
      <form (ngSubmit)="onUrlSubmit()" class="url-form">
        <div class="input-container">
          <input 
            type="url"
            [formControl]="urlControl"
            placeholder="Collez l'URL de la vid√©o YouTube ici..."
            class="url-input"
            [class.valid]="showValidIcon"
            [class.invalid]="isUrlInvalid || errorMessage()"
            [class.loading]="isLoading()"
            id="youtube-url-input"
            aria-label="URL de la vid√©o YouTube"
            aria-describedby="url-help url-error"
            [attr.aria-invalid]="isUrlInvalid || !!errorMessage()"
          >
          
          <!-- Loading spinner -->
          @if (isLoading()) {
            <div class="input-icon loading-spinner" title="Validation en cours...">
              <div class="spinner"></div>
            </div>
          } @else if (showValidIcon && !errorMessage()) {
            <!-- Valid icon -->
            <span class="input-icon valid-icon" title="URL valide">‚úì</span>
          } @else if ((isUrlInvalid || errorMessage()) && urlControl.value) {
            <!-- Invalid icon -->
            <span class="input-icon invalid-icon" title="URL invalide">‚ö†Ô∏è</span>
          }
          
          <!-- Clear button -->
          @if (urlControl.value && !isLoading()) {
            <button 
              type="button"
              (click)="clearUrl()"
              class="clear-button"
              title="Effacer l'URL"
            >
              ‚úï
            </button>
          }
        </div>

        <!-- Submit button -->
        <button 
          type="submit"
          [disabled]="!isUrlValid || isLoading()"
          class="submit-button"
          [class.loading]="isLoading()"
          title="Charger la vid√©o"
        >
          @if (isLoading()) {
            <div class="submit-spinner">
              <div class="spinner"></div>
            </div>
          } @else {
            <span class="submit-icon">‚ñ∂</span>
          }
        </button>

        <!-- Error message -->
        @if (errorMessage() || isUrlInvalid) {
          <div class="error-message" role="alert" id="url-error">
            @if (errorMessage()) {
              {{ errorMessage() }}
            } @else if (urlControl.hasError('required')) {
              Veuillez saisir une URL YouTube
            } @else if (urlControl.hasError('invalidYouTubeUrl')) {
              URL YouTube invalide. Formats accept√©s : youtube.com/watch?v=... ou youtu.be/...
            }
          </div>
        }

        <!-- Screen reader helper text -->
        <div id="url-help" class="sr-only">
          Collez l'URL d'une vid√©o YouTube dans les formats : youtube.com/watch?v=..., youtu.be/..., ou youtube.com/embed/...
        </div>
      </form>
    </div>

    <!-- Actions Section -->
    <div class="header-actions">
      <div class="actions-container">
        <!-- Theme Toggle -->
        <app-theme-toggle></app-theme-toggle>
        
        <!-- Future actions can be added here -->
      </div>
    </div>
  </div>
</header>
